<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:11,&quot;tests&quot;:74,&quot;passes&quot;:74,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2024-11-27T20:51:32.007Z&quot;,&quot;end&quot;:&quot;2024-11-27T20:51:37.660Z&quot;,&quot;duration&quot;:5653,&quot;testsRegistered&quot;:74,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;b174898b-8472-4d09-aead-7b15ad9d31ac&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await db.end();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d20e99d-df53-431c-9524-f97aeafcf4ec&quot;,&quot;parentUUID&quot;:&quot;b174898b-8472-4d09-aead-7b15ad9d31ac&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b4d77ce9-8701-494a-8818-fdf0eaeebdb3&quot;,&quot;title&quot;:&quot;Bienvenida&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\test\\empleados.test.js&quot;,&quot;file&quot;:&quot;\\test\\empleados.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Bienvenido a los test de la API MS&quot;,&quot;fullTitle&quot;:&quot;Bienvenida Bienvenido a los test de la API MS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;console.log(&#x27;***********************************&#x27;);\nconsole.log(&#x27;* Bienvenido a los test de la API MS *&#x27;);\nconsole.log(&#x27;***********************************&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ceb0f88-4806-4dd2-a67d-e6b8589d981f&quot;,&quot;parentUUID&quot;:&quot;b4d77ce9-8701-494a-8818-fdf0eaeebdb3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ceb0f88-4806-4dd2-a67d-e6b8589d981f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;69af556d-ed86-4fa5-97ae-85bfdc3f8bf5&quot;,&quot;title&quot;:&quot;Empleados API Endpoints&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\test\\empleados.test.js&quot;,&quot;file&quot;:&quot;\\test\\empleados.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Empleados API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Empleados API Endpoints \&quot;before all\&quot; hook in \&quot;Empleados API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Reiniciar tablas relacionadas y configurar datos iniciales\nawait db.query(&#x27;TRUNCATE TABLE empleados RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE usuarios RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE roles RESTART IDENTITY CASCADE&#x27;);\n// Insertar roles\nawait db.query(`\n  INSERT INTO roles (tipo) \n  VALUES (&#x27;Administrador&#x27;), (&#x27;Vendedor&#x27;), (&#x27;Cliente&#x27;), (&#x27;Gerente&#x27;), (&#x27;Soporte Técnico&#x27;);\n`);\n// Insertar usuarios\nawait db.query(`\n  INSERT INTO usuarios (nombre, correo, password, idRol)\n  VALUES \n    (&#x27;Eliezer Cerecedo&#x27;, &#x27;eliezercerecedo82@gmail.com&#x27;, &#x27;Bocchi17&#x27;, 1),\n    (&#x27;Juan Pablo&#x27;, &#x27;juanpablo@gmail.com&#x27;, &#x27;pablitin18&#x27;, 2);\n`);\n// Insertar empleados\nawait db.query(`\n  INSERT INTO empleados (nombre, appaterno, apmaterno, fechanacimiento, curp, idusuario)\n  VALUES \n    (&#x27;Eliezer Isai&#x27;, &#x27;Cerecedo&#x27;, &#x27;Florencia&#x27;, &#x27;2002-11-12&#x27;, &#x27;ABC123456XYZ789012&#x27;, 1),\n    (&#x27;Juan&#x27;, &#x27;Perez&#x27;, &#x27;Lopez&#x27;, &#x27;1985-07-20&#x27;, &#x27;DEF123456XYZ789012&#x27;, 2);\n`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;981d7825-540d-47c7-a5fb-22ace99fa3a6&quot;,&quot;parentUUID&quot;:&quot;69af556d-ed86-4fa5-97ae-85bfdc3f8bf5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Empleados API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Empleados API Endpoints \&quot;after all\&quot; hook in \&quot;Empleados API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await db.query(&#x27;TRUNCATE TABLE empleados RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE usuarios RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE roles RESTART IDENTITY CASCADE&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58f5f6fa-9a64-4a6e-a5ef-5ff24c21c77b&quot;,&quot;parentUUID&quot;:&quot;69af556d-ed86-4fa5-97ae-85bfdc3f8bf5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;GET /api/empleados debe retornar todos los empleados&quot;,&quot;fullTitle&quot;:&quot;Empleados API Endpoints GET /api/empleados debe retornar todos los empleados&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/empleados&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(Array.isArray(res.body), true);\nassert.strictEqual(res.body.length, 2);\nassert.strictEqual(res.body[0].nombre, &#x27;Eliezer Isai&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45e013da-31d2-4123-af69-a109ce25ef9a&quot;,&quot;parentUUID&quot;:&quot;69af556d-ed86-4fa5-97ae-85bfdc3f8bf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/empleados/:id debe retornar un empleado por ID&quot;,&quot;fullTitle&quot;:&quot;Empleados API Endpoints GET /api/empleados/:id debe retornar un empleado por ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/empleados/1&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.nombre, &#x27;Eliezer Isai&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b427d4c0-5d07-46f7-87ae-3caf46fdd2bb&quot;,&quot;parentUUID&quot;:&quot;69af556d-ed86-4fa5-97ae-85bfdc3f8bf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/empleados debe crear un nuevo empleado con datos válidos&quot;,&quot;fullTitle&quot;:&quot;Empleados API Endpoints POST /api/empleados debe crear un nuevo empleado con datos válidos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:149,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newEmpleado = {\n  nombre: &#x27;Oscar&#x27;,\n  appaterno: &#x27;Martinez&#x27;,\n  apmaterno: &#x27;Gomez&#x27;,\n  fechanacimiento: &#x27;1990-04-15&#x27;,\n  curp: &#x27;OSMG900415HDFRZS02&#x27;, // CURP con formato válido\n  idusuario: 1,\n};\nconst res = await request(app).post(&#x27;/api/empleados&#x27;).send(newEmpleado);\nassert.strictEqual(res.status, 201);\nassert.strictEqual(res.body.nombre, &#x27;Oscar&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1b52c8d-ac96-4609-a86b-0b4053c05207&quot;,&quot;parentUUID&quot;:&quot;69af556d-ed86-4fa5-97ae-85bfdc3f8bf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/empleados debe fallar con datos inválidos&quot;,&quot;fullTitle&quot;:&quot;Empleados API Endpoints POST /api/empleados debe fallar con datos inválidos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidEmpleado = {\n  nombre: &#x27;Os&#x27;, // Nombre demasiado corto\n  appaterno: &#x27;&#x27;, // Apellido paterno vacío\n  apmaterno: &#x27;ApellidoMuyLargoQueExcedeElLimite&#x27;, // Apellido materno demasiado largo\n  fechanacimiento: &#x27;2025-04-15&#x27;, // Fecha futura inválida\n  curp: &#x27;CURPINVALIDO&#x27;, // CURP con formato incorrecto\n  idusuario: 1,\n};\nconst res = await request(app).post(&#x27;/api/empleados&#x27;).send(invalidEmpleado);\nassert.strictEqual(res.status, 400);\nassert.strictEqual(Array.isArray(res.body.errores), true);\nassert.ok(res.body.errores.length &gt; 0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06e7002a-e5f6-430f-a8cb-b6fca6087290&quot;,&quot;parentUUID&quot;:&quot;69af556d-ed86-4fa5-97ae-85bfdc3f8bf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;PUT /api/empleados/:id debe actualizar un empleado con datos válidos&quot;,&quot;fullTitle&quot;:&quot;Empleados API Endpoints PUT /api/empleados/:id debe actualizar un empleado con datos válidos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:167,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedEmpleado = {\n  nombre: &#x27;Eliezer Actualizado&#x27;,\n  appaterno: &#x27;Cerecedo&#x27;,\n  apmaterno: &#x27;Florencia&#x27;,\n  fechanacimiento: &#x27;2002-11-12&#x27;,\n  curp: &#x27;ELCF021112HDFRZS04&#x27;, // CURP con formato válido\n  idusuario: 1,\n};\nconst res = await request(app).put(&#x27;/api/empleados/1&#x27;).send(updatedEmpleado);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.nombre, &#x27;Eliezer Actualizado&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4ae0df0-651d-42f1-9e15-ab8985a0603e&quot;,&quot;parentUUID&quot;:&quot;69af556d-ed86-4fa5-97ae-85bfdc3f8bf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;DELETE /api/empleados/:id debe eliminar un empleado&quot;,&quot;fullTitle&quot;:&quot;Empleados API Endpoints DELETE /api/empleados/:id debe eliminar un empleado&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:161,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).delete(&#x27;/api/empleados/1&#x27;);\nassert.strictEqual(res.status, 204);\n// Verificar que el empleado fue eliminado\nconst getRes = await request(app).get(&#x27;/api/empleados/1&#x27;);\nassert.strictEqual(getRes.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9439173f-a853-4721-9571-36398404d350&quot;,&quot;parentUUID&quot;:&quot;69af556d-ed86-4fa5-97ae-85bfdc3f8bf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/empleados/:id debe retornar 404 para un empleado inexistente&quot;,&quot;fullTitle&quot;:&quot;Empleados API Endpoints GET /api/empleados/:id debe retornar 404 para un empleado inexistente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:50,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/empleados/9999&#x27;);\nassert.strictEqual(res.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20d9cb7f-d684-4886-af86-a7bc05c3e02b&quot;,&quot;parentUUID&quot;:&quot;69af556d-ed86-4fa5-97ae-85bfdc3f8bf5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;45e013da-31d2-4123-af69-a109ce25ef9a&quot;,&quot;b427d4c0-5d07-46f7-87ae-3caf46fdd2bb&quot;,&quot;d1b52c8d-ac96-4609-a86b-0b4053c05207&quot;,&quot;06e7002a-e5f6-430f-a8cb-b6fca6087290&quot;,&quot;e4ae0df0-651d-42f1-9e15-ab8985a0603e&quot;,&quot;9439173f-a853-4721-9571-36398404d350&quot;,&quot;20d9cb7f-d684-4886-af86-a7bc05c3e02b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:620,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f2c80c2b-f96a-4b68-9e23-0b3486a42d85&quot;,&quot;title&quot;:&quot;Métodos de Venta API Endpoints&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\test\\metodoVenta.test.js&quot;,&quot;file&quot;:&quot;\\test\\metodoVenta.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Métodos de Venta API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Métodos de Venta API Endpoints \&quot;before all\&quot; hook in \&quot;Métodos de Venta API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Reiniciar tablas relacionadas y configurar datos iniciales\nawait db.query(&#x27;TRUNCATE TABLE MetodoVenta RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE tipoPago RESTART IDENTITY CASCADE&#x27;);\n// Insertar tipos de pago\nawait db.query(`\n      INSERT INTO tipoPago (descripcion, fecha_creacion, activo) \n      VALUES (&#x27;Efectivo&#x27;, NOW(), TRUE), (&#x27;Tarjeta de crédito&#x27;, NOW(), TRUE);\n    `);\n// Insertar métodos de venta\nawait db.query(`\n      INSERT INTO MetodoVenta (idTipoPago, descripcion, comision, fecha_creacion, activo)\n      VALUES \n(1, &#x27;Efectivo&#x27;, 0.00, NOW(), TRUE), \n(2, &#x27;Tarjeta de crédito&#x27;, 0.05, NOW(), TRUE);\n    `);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;043ef17a-d2b5-473c-adfd-2a9cb0ac652d&quot;,&quot;parentUUID&quot;:&quot;f2c80c2b-f96a-4b68-9e23-0b3486a42d85&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Métodos de Venta API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Métodos de Venta API Endpoints \&quot;after all\&quot; hook in \&quot;Métodos de Venta API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await db.query(&#x27;TRUNCATE TABLE MetodoVenta RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE tipoPago RESTART IDENTITY CASCADE&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ca74d7d-9b14-4c11-9d0f-3c8e3646f8a3&quot;,&quot;parentUUID&quot;:&quot;f2c80c2b-f96a-4b68-9e23-0b3486a42d85&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;GET /api/metodos-venta debe retornar todos los métodos de venta&quot;,&quot;fullTitle&quot;:&quot;Métodos de Venta API Endpoints GET /api/metodos-venta debe retornar todos los métodos de venta&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/metodos-venta&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(Array.isArray(res.body), true);\nassert.strictEqual(res.body.length, 2);\nassert.strictEqual(res.body[0].descripcion, &#x27;Efectivo&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8041e38-a235-4c71-ae8d-89bb1bff840e&quot;,&quot;parentUUID&quot;:&quot;f2c80c2b-f96a-4b68-9e23-0b3486a42d85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/metodos-venta/:id debe retornar un método de venta por ID&quot;,&quot;fullTitle&quot;:&quot;Métodos de Venta API Endpoints GET /api/metodos-venta/:id debe retornar un método de venta por ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/metodos-venta/1&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.descripcion, &#x27;Efectivo&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32addf01-0fec-446c-803b-bd31bcaa1bc3&quot;,&quot;parentUUID&quot;:&quot;f2c80c2b-f96a-4b68-9e23-0b3486a42d85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/metodos-venta debe crear un nuevo método de venta&quot;,&quot;fullTitle&quot;:&quot;Métodos de Venta API Endpoints POST /api/metodos-venta debe crear un nuevo método de venta&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:110,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newMetodo = {\n    idTipoPago: 1,\n    descripcion: &#x27;Transferencia Bancaria&#x27;,\n    comision: 0.02,\n    activo: true,\n};\nconst res = await request(app).post(&#x27;/api/metodos-venta&#x27;).send(newMetodo);\nassert.strictEqual(res.status, 201);\nassert.strictEqual(res.body.descripcion, &#x27;Transferencia Bancaria&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d0e1dd9-2d83-4615-94fd-13c7bc2746ca&quot;,&quot;parentUUID&quot;:&quot;f2c80c2b-f96a-4b68-9e23-0b3486a42d85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/metodos-venta debe fallar con datos inválidos&quot;,&quot;fullTitle&quot;:&quot;Métodos de Venta API Endpoints POST /api/metodos-venta debe fallar con datos inválidos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidMetodo = {\n    idTipoPago: 99, // No existe\n    descripcion: &#x27;AB&#x27;, // Descripción muy corta\n    comision: 1.5, // Comisión fuera de rango\n    activo: &#x27;true&#x27;, // No es booleano\n};\nconst res = await request(app).post(&#x27;/api/metodos-venta&#x27;).send(invalidMetodo);\nassert.strictEqual(res.status, 400);\nassert.ok(Array.isArray(res.body.errores));\nassert.ok(res.body.errores.length &gt; 0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a060170d-0340-4021-bbb1-ed436103b6c9&quot;,&quot;parentUUID&quot;:&quot;f2c80c2b-f96a-4b68-9e23-0b3486a42d85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;PUT /api/metodos-venta/:id debe actualizar un método de venta&quot;,&quot;fullTitle&quot;:&quot;Métodos de Venta API Endpoints PUT /api/metodos-venta/:id debe actualizar un método de venta&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:105,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedMetodo = {\n    idTipoPago: 2,\n    descripcion: &#x27;Pago con Tarjeta&#x27;,\n    comision: 0.03,\n    activo: false,\n};\nconst res = await request(app).put(&#x27;/api/metodos-venta/1&#x27;).send(updatedMetodo);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.descripcion, &#x27;Pago con Tarjeta&#x27;);\nassert.strictEqual(Number(res.body.comision), 0.03); // Convertir a número para la comparación&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c29d3f6-36bb-4af2-8652-9dfc3a945128&quot;,&quot;parentUUID&quot;:&quot;f2c80c2b-f96a-4b68-9e23-0b3486a42d85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;DELETE /api/metodos-venta/:id debe eliminar un método de venta&quot;,&quot;fullTitle&quot;:&quot;Métodos de Venta API Endpoints DELETE /api/metodos-venta/:id debe eliminar un método de venta&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:104,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).delete(&#x27;/api/metodos-venta/1&#x27;);\nassert.strictEqual(res.status, 204);\n// Verificar que el método de venta fue eliminado\nconst getRes = await request(app).get(&#x27;/api/metodos-venta/1&#x27;);\nassert.strictEqual(getRes.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56363291-a5de-4175-8cec-975a996e4a64&quot;,&quot;parentUUID&quot;:&quot;f2c80c2b-f96a-4b68-9e23-0b3486a42d85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/metodos-venta/:id debe retornar 404 para un método inexistente&quot;,&quot;fullTitle&quot;:&quot;Métodos de Venta API Endpoints GET /api/metodos-venta/:id debe retornar 404 para un método inexistente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/metodos-venta/9999&#x27;);\nassert.strictEqual(res.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfad72d3-8098-41c2-9a0e-68b760f0634e&quot;,&quot;parentUUID&quot;:&quot;f2c80c2b-f96a-4b68-9e23-0b3486a42d85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e8041e38-a235-4c71-ae8d-89bb1bff840e&quot;,&quot;32addf01-0fec-446c-803b-bd31bcaa1bc3&quot;,&quot;2d0e1dd9-2d83-4615-94fd-13c7bc2746ca&quot;,&quot;a060170d-0340-4021-bbb1-ed436103b6c9&quot;,&quot;3c29d3f6-36bb-4af2-8652-9dfc3a945128&quot;,&quot;56363291-a5de-4175-8cec-975a996e4a64&quot;,&quot;dfad72d3-8098-41c2-9a0e-68b760f0634e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:509,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b4c79f0b-258d-43c2-b818-fe6c8acda04a&quot;,&quot;title&quot;:&quot;PedidoDetalles API Endpoints&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\test\\pedidoDetalles.test.js&quot;,&quot;file&quot;:&quot;\\test\\pedidoDetalles.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;PedidoDetalles API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;PedidoDetalles API Endpoints \&quot;before all\&quot; hook in \&quot;PedidoDetalles API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:105,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Reiniciar tablas relacionadas y configurar datos iniciales\nawait db.query(&#x27;TRUNCATE TABLE PedidoDetalles RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Pedidos RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Productos RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Categorias RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE MetodoVenta RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE tipoPago RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Proveedores RESTART IDENTITY CASCADE&#x27;);\n// Insertar categorías\nawait db.query(`\n    INSERT INTO Categorias (nombre, descripcion)\n    VALUES \n        (&#x27;Electrónicos&#x27;, &#x27;Productos electrónicos de consumo&#x27;),\n        (&#x27;Papelería&#x27;, &#x27;Productos de papelería y oficina&#x27;);\n`);\n// Insertar productos\nawait db.query(`\n    INSERT INTO Productos (nombre, descripcion, precio, stock, idCategoria)\n    VALUES \n        (&#x27;Smartphone&#x27;, &#x27;Teléfono inteligente de última generación&#x27;, 899.99, 50, 1),\n        (&#x27;Lápiz&#x27;, &#x27;Lápiz de grafito HB&#x27;, 0.99, 1000, 2);\n`);\n// Insertar tipos de pago y métodos de venta\nawait db.query(`\n    INSERT INTO tipoPago (descripcion, fecha_creacion, activo) \n    VALUES (&#x27;Efectivo&#x27;, NOW(), TRUE), (&#x27;Tarjeta de crédito&#x27;, NOW(), TRUE);\n`);\nawait db.query(`\n    INSERT INTO MetodoVenta (idTipoPago, descripcion, comision, fecha_creacion, activo)\n    VALUES \n        (1, &#x27;Efectivo&#x27;, 0.00, NOW(), TRUE), \n        (2, &#x27;Tarjeta de crédito&#x27;, 0.05, NOW(), TRUE);\n`);\n// Insertar proveedores y pedidos\nawait db.query(`\n    INSERT INTO Proveedores (nombre, direccion, rfc, telefono)\n    VALUES (&#x27;Proveedor XYZ&#x27;, &#x27;Calle Principal 123&#x27;, &#x27;RFC123456789&#x27;, &#x27;5551234561&#x27;);\n`);\nawait db.query(`\n    INSERT INTO Pedidos (total, estado, fechaPedido, idMetodoV, idProveedor)\n    VALUES \n        (1200.50, &#x27;Pendiente&#x27;, NOW(), 1, 1);\n`);\n// Insertar detalle de pedido inicial\nawait db.query(`\n    INSERT INTO PedidoDetalles (idPedido, idProducto, cantidad, subtotal, iva)\n    VALUES (1, 1, 5, 500.00, 80.00);\n`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a857fa49-84d2-4e86-81cc-168af87f7cd4&quot;,&quot;parentUUID&quot;:&quot;b4c79f0b-258d-43c2-b818-fe6c8acda04a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;PedidoDetalles API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;PedidoDetalles API Endpoints \&quot;after all\&quot; hook in \&quot;PedidoDetalles API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await db.query(&#x27;TRUNCATE TABLE PedidoDetalles RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Pedidos RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Productos RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE MetodoVenta RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE tipoPago RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Proveedores RESTART IDENTITY CASCADE&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e442c8e-699f-4187-affe-3f9400f1f756&quot;,&quot;parentUUID&quot;:&quot;b4c79f0b-258d-43c2-b818-fe6c8acda04a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;GET /api/pedido-detalles debe retornar todos los detalles de pedidos&quot;,&quot;fullTitle&quot;:&quot;PedidoDetalles API Endpoints GET /api/pedido-detalles debe retornar todos los detalles de pedidos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/pedido-detalles&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(Array.isArray(res.body), true);\nassert.strictEqual(res.body.length, 1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae3a34ed-a344-48c3-8cf8-ca10fbf8fcaf&quot;,&quot;parentUUID&quot;:&quot;b4c79f0b-258d-43c2-b818-fe6c8acda04a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/pedido-detalles/:idPedido/:idProducto debe retornar un detalle de pedido por ID&quot;,&quot;fullTitle&quot;:&quot;PedidoDetalles API Endpoints GET /api/pedido-detalles/:idPedido/:idProducto debe retornar un detalle de pedido por ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/pedido-detalles/1/1&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.cantidad, 5);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d68ce418-5efa-439f-9dd8-ed7fcab96e13&quot;,&quot;parentUUID&quot;:&quot;b4c79f0b-258d-43c2-b818-fe6c8acda04a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/pedido-detalles debe crear un nuevo detalle de pedido&quot;,&quot;fullTitle&quot;:&quot;PedidoDetalles API Endpoints POST /api/pedido-detalles debe crear un nuevo detalle de pedido&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:260,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newDetalle = {\n    idPedido: 1,\n    idProducto: 2,\n    cantidad: 10,\n};\nconst res = await request(app).post(&#x27;/api/pedido-detalles&#x27;).send(newDetalle);\nassert.strictEqual(res.status, 201);\nassert.strictEqual(res.body.cantidad, 10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3435d91d-29ba-45ac-ac11-5a4dc601631a&quot;,&quot;parentUUID&quot;:&quot;b4c79f0b-258d-43c2-b818-fe6c8acda04a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/pedido-detalles debe fallar si el stock es insuficiente&quot;,&quot;fullTitle&quot;:&quot;PedidoDetalles API Endpoints POST /api/pedido-detalles debe fallar si el stock es insuficiente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:109,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidDetalle = {\n    idPedido: 1,\n    idProducto: 2,\n    cantidad: 2000, // Mayor que el stock\n};\nconst res = await request(app).post(&#x27;/api/pedido-detalles&#x27;).send(invalidDetalle);\nassert.strictEqual(res.status, 400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;172852bf-497c-42cf-82dd-ecca4333194b&quot;,&quot;parentUUID&quot;:&quot;b4c79f0b-258d-43c2-b818-fe6c8acda04a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/pedido-detalles debe fallar si el detalle ya existe&quot;,&quot;fullTitle&quot;:&quot;PedidoDetalles API Endpoints POST /api/pedido-detalles debe fallar si el detalle ya existe&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:154,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const duplicateDetalle = {\n    idPedido: 1,\n    idProducto: 1,\n    cantidad: 5,\n};\nconst res = await request(app).post(&#x27;/api/pedido-detalles&#x27;).send(duplicateDetalle);\nassert.strictEqual(res.status, 400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ff6c7ce-d512-4dfe-889b-81680b3fc130&quot;,&quot;parentUUID&quot;:&quot;b4c79f0b-258d-43c2-b818-fe6c8acda04a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;PUT /api/pedido-detalles/:idPedido/:idProducto debe actualizar un detalle de pedido&quot;,&quot;fullTitle&quot;:&quot;PedidoDetalles API Endpoints PUT /api/pedido-detalles/:idPedido/:idProducto debe actualizar un detalle de pedido&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:165,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedDetalle = { cantidad: 15 };\nconst res = await request(app).put(&#x27;/api/pedido-detalles/1/1&#x27;).send(updatedDetalle);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.cantidad, 15);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0882d86c-cadd-4d32-a0f4-b8add8e7e5a4&quot;,&quot;parentUUID&quot;:&quot;b4c79f0b-258d-43c2-b818-fe6c8acda04a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;DELETE /api/pedido-detalles/:idPedido/:idProducto debe eliminar un detalle de pedido&quot;,&quot;fullTitle&quot;:&quot;PedidoDetalles API Endpoints DELETE /api/pedido-detalles/:idPedido/:idProducto debe eliminar un detalle de pedido&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:226,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).delete(&#x27;/api/pedido-detalles/1/1&#x27;);\nassert.strictEqual(res.status, 204);\n// Verificar que fue eliminado\nconst getRes = await request(app).get(&#x27;/api/pedido-detalles/1/1&#x27;);\nassert.strictEqual(getRes.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29deb632-bb92-4c7e-aa19-29f60e61b0f8&quot;,&quot;parentUUID&quot;:&quot;b4c79f0b-258d-43c2-b818-fe6c8acda04a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/pedido-detalles/:idPedido/:idProducto debe retornar 404 para un detalle inexistente&quot;,&quot;fullTitle&quot;:&quot;PedidoDetalles API Endpoints GET /api/pedido-detalles/:idPedido/:idProducto debe retornar 404 para un detalle inexistente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/pedido-detalles/9999/9999&#x27;);\nassert.strictEqual(res.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4de381d0-4e86-4423-9dc7-2e862d7470a8&quot;,&quot;parentUUID&quot;:&quot;b4c79f0b-258d-43c2-b818-fe6c8acda04a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ae3a34ed-a344-48c3-8cf8-ca10fbf8fcaf&quot;,&quot;d68ce418-5efa-439f-9dd8-ed7fcab96e13&quot;,&quot;3435d91d-29ba-45ac-ac11-5a4dc601631a&quot;,&quot;172852bf-497c-42cf-82dd-ecca4333194b&quot;,&quot;1ff6c7ce-d512-4dfe-889b-81680b3fc130&quot;,&quot;0882d86c-cadd-4d32-a0f4-b8add8e7e5a4&quot;,&quot;29deb632-bb92-4c7e-aa19-29f60e61b0f8&quot;,&quot;4de381d0-4e86-4423-9dc7-2e862d7470a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1039,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f8a3d063-9080-44d6-9ddd-6ff6a382e25d&quot;,&quot;title&quot;:&quot;Pedidos API Endpoints&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\test\\pedidos.test.js&quot;,&quot;file&quot;:&quot;\\test\\pedidos.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Pedidos API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Pedidos API Endpoints \&quot;before all\&quot; hook in \&quot;Pedidos API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:47,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Reiniciar tablas relacionadas y configurar datos iniciales\nawait db.query(&#x27;TRUNCATE TABLE Pedidos RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Proveedores RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE MetodoVenta RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE tipoPago RESTART IDENTITY CASCADE&#x27;);\n// Insertar tipos de pago\nawait db.query(`\n    INSERT INTO tipoPago (descripcion, fecha_creacion, activo) \n    VALUES (&#x27;Efectivo&#x27;, NOW(), TRUE), (&#x27;Tarjeta de crédito&#x27;, NOW(), TRUE);\n`);\n// Insertar métodos de venta\nawait db.query(`\n    INSERT INTO MetodoVenta (idTipoPago, descripcion, comision, fecha_creacion, activo)\n    VALUES \n        (1, &#x27;Efectivo&#x27;, 0.00, NOW(), TRUE), \n        (2, &#x27;Tarjeta de crédito&#x27;, 0.05, NOW(), TRUE);\n`);\n// Insertar proveedores\nawait db.query(`\n    INSERT INTO Proveedores (nombre, direccion, rfc, telefono)\n    VALUES \n        (&#x27;Proveedor XYZ&#x27;, &#x27;Calle Principal 123&#x27;, &#x27;RFC123456789&#x27;, &#x27;5551234561&#x27;),\n        (&#x27;Proveedor ABC&#x27;, &#x27;Calle Secundaria 456&#x27;, &#x27;RFC987654321&#x27;, &#x27;5551234562&#x27;);\n`);\n// Insertar pedidos\nawait db.query(`\n    INSERT INTO Pedidos (total, estado, fechaPedido, idMetodoV, idProveedor)\n    VALUES \n        (1200.50, &#x27;Pendiente&#x27;, NOW(), 1, 1),\n        (850.75, &#x27;Completado&#x27;, NOW(), 2, 2);\n`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bac26f2-71ef-48d9-9a63-c9f8e5466af2&quot;,&quot;parentUUID&quot;:&quot;f8a3d063-9080-44d6-9ddd-6ff6a382e25d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Pedidos API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Pedidos API Endpoints \&quot;after all\&quot; hook in \&quot;Pedidos API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await db.query(&#x27;TRUNCATE TABLE Pedidos RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Proveedores RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE MetodoVenta RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE tipoPago RESTART IDENTITY CASCADE&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9294f591-fae1-452a-aa06-6e7af13d7f1b&quot;,&quot;parentUUID&quot;:&quot;f8a3d063-9080-44d6-9ddd-6ff6a382e25d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;GET /api/pedidos debe retornar todos los pedidos&quot;,&quot;fullTitle&quot;:&quot;Pedidos API Endpoints GET /api/pedidos debe retornar todos los pedidos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/pedidos&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(Array.isArray(res.body), true);\nassert.strictEqual(res.body.length, 2);\nassert.strictEqual(res.body[0].estado, &#x27;Pendiente&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59061965-bfd6-416d-a898-d81011d3488e&quot;,&quot;parentUUID&quot;:&quot;f8a3d063-9080-44d6-9ddd-6ff6a382e25d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/pedidos/:id debe retornar un pedido por ID&quot;,&quot;fullTitle&quot;:&quot;Pedidos API Endpoints GET /api/pedidos/:id debe retornar un pedido por ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:53,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/pedidos/1&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.estado, &#x27;Pendiente&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69d3d62a-6434-4558-9e00-87d08990a177&quot;,&quot;parentUUID&quot;:&quot;f8a3d063-9080-44d6-9ddd-6ff6a382e25d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/pedidos debe crear un nuevo pedido&quot;,&quot;fullTitle&quot;:&quot;Pedidos API Endpoints POST /api/pedidos debe crear un nuevo pedido&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:72,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newPedido = {\n    total: 500.00,\n    estado: &#x27;Pendiente&#x27;,\n    idMetodoV: 1,\n    idProveedor: 1,\n};\nconst res = await request(app).post(&#x27;/api/pedidos&#x27;).send(newPedido);\nassert.strictEqual(res.status, 201);\nassert.strictEqual(res.body.estado, &#x27;Pendiente&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ae5ffde-f4d9-4f73-8790-66d641b44afa&quot;,&quot;parentUUID&quot;:&quot;f8a3d063-9080-44d6-9ddd-6ff6a382e25d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/pedidos debe fallar con datos inválidos&quot;,&quot;fullTitle&quot;:&quot;Pedidos API Endpoints POST /api/pedidos debe fallar con datos inválidos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidPedido = {\n    total: -100, // Total inválido\n    estado: &#x27;&#x27;, // Estado vacío\n    idMetodoV: 999, // Método de venta inexistente\n    idProveedor: 999, // Proveedor inexistente\n};\nconst res = await request(app).post(&#x27;/api/pedidos&#x27;).send(invalidPedido);\nassert.strictEqual(res.status, 400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;185f458f-e16e-4d7f-821d-145fb95797c6&quot;,&quot;parentUUID&quot;:&quot;f8a3d063-9080-44d6-9ddd-6ff6a382e25d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;PUT /api/pedidos/:id debe actualizar un pedido&quot;,&quot;fullTitle&quot;:&quot;Pedidos API Endpoints PUT /api/pedidos/:id debe actualizar un pedido&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedPedido = {\n    total: 1300.00,\n    estado: &#x27;Completado&#x27;,\n    idMetodoV: 2,\n    idProveedor: 2,\n};\nconst res = await request(app).put(&#x27;/api/pedidos/1&#x27;).send(updatedPedido);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.estado, &#x27;Completado&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a83aa3c5-85f2-422f-8e5d-7c48e402049c&quot;,&quot;parentUUID&quot;:&quot;f8a3d063-9080-44d6-9ddd-6ff6a382e25d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;DELETE /api/pedidos/:id debe eliminar un pedido&quot;,&quot;fullTitle&quot;:&quot;Pedidos API Endpoints DELETE /api/pedidos/:id debe eliminar un pedido&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).delete(&#x27;/api/pedidos/1&#x27;);\nassert.strictEqual(res.status, 204);\n// Verificar que el pedido fue eliminado\nconst getRes = await request(app).get(&#x27;/api/pedidos/1&#x27;);\nassert.strictEqual(getRes.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae989b3d-5277-4c59-a9dc-a9b5776b4f48&quot;,&quot;parentUUID&quot;:&quot;f8a3d063-9080-44d6-9ddd-6ff6a382e25d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/pedidos/:id debe retornar 404 para un pedido inexistente&quot;,&quot;fullTitle&quot;:&quot;Pedidos API Endpoints GET /api/pedidos/:id debe retornar 404 para un pedido inexistente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/pedidos/9999&#x27;);\nassert.strictEqual(res.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cc15398-0784-4b21-96e7-8d85b2694bf1&quot;,&quot;parentUUID&quot;:&quot;f8a3d063-9080-44d6-9ddd-6ff6a382e25d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59061965-bfd6-416d-a898-d81011d3488e&quot;,&quot;69d3d62a-6434-4558-9e00-87d08990a177&quot;,&quot;5ae5ffde-f4d9-4f73-8790-66d641b44afa&quot;,&quot;185f458f-e16e-4d7f-821d-145fb95797c6&quot;,&quot;a83aa3c5-85f2-422f-8e5d-7c48e402049c&quot;,&quot;ae989b3d-5277-4c59-a9dc-a9b5776b4f48&quot;,&quot;0cc15398-0784-4b21-96e7-8d85b2694bf1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:374,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;130307dc-161d-4bff-b124-6e61bca3d347&quot;,&quot;title&quot;:&quot;Productos API Endpoints&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\test\\productos.test.js&quot;,&quot;file&quot;:&quot;\\test\\productos.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Productos API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Productos API Endpoints \&quot;before all\&quot; hook in \&quot;Productos API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Reset tables and set up initial data\nawait db.query(&#x27;TRUNCATE TABLE Productos RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Categorias RESTART IDENTITY CASCADE&#x27;);\n// Insert categories\nawait db.query(`\n    INSERT INTO Categorias (nombre, descripcion)\n    VALUES \n        (&#x27;Electrónicos&#x27;, &#x27;Productos electrónicos de consumo&#x27;),\n        (&#x27;Papelería&#x27;, &#x27;Productos de papelería y oficina&#x27;);\n`);\n// Insert initial products\nawait db.query(`\n    INSERT INTO Productos (nombre, descripcion, precio, stock, idcategoria)\n    VALUES \n        (&#x27;Smartphone&#x27;, &#x27;Teléfono inteligente de última generación&#x27;, 899.99, 50, 1),\n        (&#x27;Lápiz&#x27;, &#x27;Lápiz de grafito HB&#x27;, 0.99, 1000, 2);\n`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a74767a-1ea8-4ec6-9e4a-a2942bf328d5&quot;,&quot;parentUUID&quot;:&quot;130307dc-161d-4bff-b124-6e61bca3d347&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Productos API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Productos API Endpoints \&quot;after all\&quot; hook in \&quot;Productos API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await db.query(&#x27;TRUNCATE TABLE Productos RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Categorias RESTART IDENTITY CASCADE&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d91bf246-7a7f-4c95-ae69-8d9b3dfdec0a&quot;,&quot;parentUUID&quot;:&quot;130307dc-161d-4bff-b124-6e61bca3d347&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;GET /api/productos debe retornar todos los productos&quot;,&quot;fullTitle&quot;:&quot;Productos API Endpoints GET /api/productos debe retornar todos los productos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/productos&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(Array.isArray(res.body), true);\nassert.strictEqual(res.body.length, 2);\nassert.strictEqual(res.body[0].nombre, &#x27;Smartphone&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40099bb8-fdac-40dd-adfc-98a3736a39e3&quot;,&quot;parentUUID&quot;:&quot;130307dc-161d-4bff-b124-6e61bca3d347&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/productos/:id debe retornar un producto por ID&quot;,&quot;fullTitle&quot;:&quot;Productos API Endpoints GET /api/productos/:id debe retornar un producto por ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:53,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/productos/1&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.nombre, &#x27;Smartphone&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcb0bd3a-defe-4101-81c7-a9010e37070f&quot;,&quot;parentUUID&quot;:&quot;130307dc-161d-4bff-b124-6e61bca3d347&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/productos/:id debe retornar 404 para un producto inexistente&quot;,&quot;fullTitle&quot;:&quot;Productos API Endpoints GET /api/productos/:id debe retornar 404 para un producto inexistente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/productos/9999&#x27;);\nassert.strictEqual(res.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14b777e2-c4bd-404e-bf12-b398f8866855&quot;,&quot;parentUUID&quot;:&quot;130307dc-161d-4bff-b124-6e61bca3d347&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/productos debe crear un nuevo producto&quot;,&quot;fullTitle&quot;:&quot;Productos API Endpoints POST /api/productos debe crear un nuevo producto&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:53,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newProducto = {\n    nombre: &#x27;Tablet&#x27;,\n    descripcion: &#x27;Tablet de última generación&#x27;,\n    precio: 499.99,\n    stock: 30,\n    idcategoria: 1,\n};\nconst res = await request(app).post(&#x27;/api/productos&#x27;).send(newProducto);\nassert.strictEqual(res.status, 201);\nassert.strictEqual(res.body.nombre, &#x27;Tablet&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79758cae-b475-4a62-937b-78758d3d167c&quot;,&quot;parentUUID&quot;:&quot;130307dc-161d-4bff-b124-6e61bca3d347&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/productos debe fallar con datos inválidos&quot;,&quot;fullTitle&quot;:&quot;Productos API Endpoints POST /api/productos debe fallar con datos inválidos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidProducto = {\n    nombre: &#x27;&#x27;, // Nombre vacío\n    descripcion: &#x27;Producto inválido&#x27;,\n    precio: -100, // Precio negativo\n    stock: -10, // Stock negativo\n    idcategoria: 9999, // Categoría inexistente\n};\nconst res = await request(app).post(&#x27;/api/productos&#x27;).send(invalidProducto);\nassert.strictEqual(res.status, 400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a131ff5-bc2d-40bd-a182-825c8ddc87a2&quot;,&quot;parentUUID&quot;:&quot;130307dc-161d-4bff-b124-6e61bca3d347&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;PUT /api/productos/:id debe actualizar un producto existente&quot;,&quot;fullTitle&quot;:&quot;Productos API Endpoints PUT /api/productos/:id debe actualizar un producto existente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedProducto = {\n    nombre: &#x27;Smartphone Pro&#x27;,\n    descripcion: &#x27;Teléfono inteligente avanzado&#x27;,\n    precio: 999.99,\n    stock: 60,\n    idcategoria: 1,\n};\nconst res = await request(app).put(&#x27;/api/productos/1&#x27;).send(updatedProducto);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.nombre, &#x27;Smartphone Pro&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;682efce4-ae1b-4f94-b484-02a75e5ff546&quot;,&quot;parentUUID&quot;:&quot;130307dc-161d-4bff-b124-6e61bca3d347&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;PUT /api/productos/:id debe retornar 404 para un producto inexistente&quot;,&quot;fullTitle&quot;:&quot;Productos API Endpoints PUT /api/productos/:id debe retornar 404 para un producto inexistente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedProducto = {\n    nombre: &#x27;Producto Fantasma&#x27;,\n    descripcion: &#x27;Descripción fantasma&#x27;,\n    precio: 100,\n    stock: 10,\n    idcategoria: 1,\n};\nconst res = await request(app).put(&#x27;/api/productos/9999&#x27;).send(updatedProducto);\nassert.strictEqual(res.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad63cad4-368e-46e3-a5fd-56c125117011&quot;,&quot;parentUUID&quot;:&quot;130307dc-161d-4bff-b124-6e61bca3d347&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;DELETE /api/productos/:id debe eliminar un producto existente&quot;,&quot;fullTitle&quot;:&quot;Productos API Endpoints DELETE /api/productos/:id debe eliminar un producto existente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).delete(&#x27;/api/productos/1&#x27;);\nassert.strictEqual(res.status, 204);\n// Verify it was deleted\nconst getRes = await request(app).get(&#x27;/api/productos/1&#x27;);\nassert.strictEqual(getRes.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;069cb0e6-17a2-4b86-8588-65f58204db61&quot;,&quot;parentUUID&quot;:&quot;130307dc-161d-4bff-b124-6e61bca3d347&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;DELETE /api/productos/:id debe retornar 404 para un producto inexistente&quot;,&quot;fullTitle&quot;:&quot;Productos API Endpoints DELETE /api/productos/:id debe retornar 404 para un producto inexistente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).delete(&#x27;/api/productos/9999&#x27;);\nassert.strictEqual(res.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fe942c4-6420-4f3a-99f9-096bc98a9525&quot;,&quot;parentUUID&quot;:&quot;130307dc-161d-4bff-b124-6e61bca3d347&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;40099bb8-fdac-40dd-adfc-98a3736a39e3&quot;,&quot;dcb0bd3a-defe-4101-81c7-a9010e37070f&quot;,&quot;14b777e2-c4bd-404e-bf12-b398f8866855&quot;,&quot;79758cae-b475-4a62-937b-78758d3d167c&quot;,&quot;0a131ff5-bc2d-40bd-a182-825c8ddc87a2&quot;,&quot;682efce4-ae1b-4f94-b484-02a75e5ff546&quot;,&quot;ad63cad4-368e-46e3-a5fd-56c125117011&quot;,&quot;069cb0e6-17a2-4b86-8588-65f58204db61&quot;,&quot;2fe942c4-6420-4f3a-99f9-096bc98a9525&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:472,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;72b596d6-899a-4961-a960-89fd7050387b&quot;,&quot;title&quot;:&quot;Proveedores API Endpoints&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\test\\proveedores.test.js&quot;,&quot;file&quot;:&quot;\\test\\proveedores.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Proveedores API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Proveedores API Endpoints \&quot;before all\&quot; hook in \&quot;Proveedores API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await db.query(&#x27;TRUNCATE TABLE Proveedores RESTART IDENTITY CASCADE&#x27;);\n// Insertar datos iniciales válidos\nawait db.query(`\n  INSERT INTO Proveedores (nombre, direccion, rfc, telefono)\n  VALUES \n    (&#x27;Proveedor XYZ&#x27;, &#x27;Calle Principal 123, Ciudad&#x27;, &#x27;RFC123456789A&#x27;, &#x27;5551234561&#x27;),\n    (&#x27;Proveedor ABC&#x27;, &#x27;Calle Secundaria 456, Ciudad&#x27;, &#x27;RFC987654321B&#x27;, &#x27;5551234562&#x27;);\n`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5865f5d3-0495-4c2c-bfa8-aff3a4a6defc&quot;,&quot;parentUUID&quot;:&quot;72b596d6-899a-4961-a960-89fd7050387b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Proveedores API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Proveedores API Endpoints \&quot;after all\&quot; hook in \&quot;Proveedores API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await db.query(&#x27;TRUNCATE TABLE Proveedores RESTART IDENTITY CASCADE&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da7da69d-f9b7-45fd-9fee-ed78438bf6e8&quot;,&quot;parentUUID&quot;:&quot;72b596d6-899a-4961-a960-89fd7050387b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;GET /api/proveedores debe retornar todos los proveedores&quot;,&quot;fullTitle&quot;:&quot;Proveedores API Endpoints GET /api/proveedores debe retornar todos los proveedores&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/proveedores&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(Array.isArray(res.body), true);\nassert.strictEqual(res.body.length, 2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6186328-5861-42d4-a1f9-3d2e0ffdeadc&quot;,&quot;parentUUID&quot;:&quot;72b596d6-899a-4961-a960-89fd7050387b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/proveedores/:id debe retornar un proveedor por ID&quot;,&quot;fullTitle&quot;:&quot;Proveedores API Endpoints GET /api/proveedores/:id debe retornar un proveedor por ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/proveedores/1&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.nombre, &#x27;Proveedor XYZ&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d00d291-d3a4-4917-872b-c070a986094b&quot;,&quot;parentUUID&quot;:&quot;72b596d6-899a-4961-a960-89fd7050387b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/proveedores debe crear un nuevo proveedor&quot;,&quot;fullTitle&quot;:&quot;Proveedores API Endpoints POST /api/proveedores debe crear un nuevo proveedor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newProveedor = {\n  nombre: &#x27;Proveedor DEF&#x27;,\n  direccion: &#x27;Calle Tercera 789&#x27;,\n  rfc: &#x27;RFC112233445C&#x27;,\n  telefono: &#x27;5551234563&#x27;,\n};\nconst res = await request(app).post(&#x27;/api/proveedores&#x27;).send(newProveedor);\nassert.strictEqual(res.status, 201);\nassert.strictEqual(res.body.nombre, &#x27;Proveedor DEF&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ba50c78-33f7-446a-89ae-7f34893652d7&quot;,&quot;parentUUID&quot;:&quot;72b596d6-899a-4961-a960-89fd7050387b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/proveedores debe fallar con datos inválidos&quot;,&quot;fullTitle&quot;:&quot;Proveedores API Endpoints POST /api/proveedores debe fallar con datos inválidos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidProveedor = {\n  nombre: &#x27;&#x27;,\n  direccion: &#x27;Dirección sin nombre&#x27;,\n  rfc: &#x27;123&#x27;, // RFC inválido\n  telefono: &#x27;123456&#x27;, // Teléfono inválido\n};\nconst res = await request(app).post(&#x27;/api/proveedores&#x27;).send(invalidProveedor);\nassert.strictEqual(res.status, 400);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79e079b0-c951-478b-8cfa-fd9bc0a7a7da&quot;,&quot;parentUUID&quot;:&quot;72b596d6-899a-4961-a960-89fd7050387b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;PUT /api/proveedores/:id debe actualizar un proveedor existente&quot;,&quot;fullTitle&quot;:&quot;Proveedores API Endpoints PUT /api/proveedores/:id debe actualizar un proveedor existente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedProveedor = {\n  nombre: &#x27;Proveedor XYZ Modificado&#x27;,\n  direccion: &#x27;Nueva dirección&#x27;,\n  rfc: &#x27;RFC0987654321&#x27;,\n  telefono: &#x27;5559876543&#x27;,\n};\nconst res = await request(app).put(&#x27;/api/proveedores/1&#x27;).send(updatedProveedor);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.nombre, &#x27;Proveedor XYZ Modificado&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31c4504a-0798-49d2-8a2e-4381ad573bba&quot;,&quot;parentUUID&quot;:&quot;72b596d6-899a-4961-a960-89fd7050387b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;DELETE /api/proveedores/:id debe eliminar un proveedor existente&quot;,&quot;fullTitle&quot;:&quot;Proveedores API Endpoints DELETE /api/proveedores/:id debe eliminar un proveedor existente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).delete(&#x27;/api/proveedores/1&#x27;);\nassert.strictEqual(res.status, 204);\n// Verificar que fue eliminado\nconst getRes = await request(app).get(&#x27;/api/proveedores/1&#x27;);\nassert.strictEqual(getRes.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e385d75-3cb0-48de-a819-bc3f0ee99c34&quot;,&quot;parentUUID&quot;:&quot;72b596d6-899a-4961-a960-89fd7050387b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a6186328-5861-42d4-a1f9-3d2e0ffdeadc&quot;,&quot;7d00d291-d3a4-4917-872b-c070a986094b&quot;,&quot;9ba50c78-33f7-446a-89ae-7f34893652d7&quot;,&quot;79e079b0-c951-478b-8cfa-fd9bc0a7a7da&quot;,&quot;31c4504a-0798-49d2-8a2e-4381ad573bba&quot;,&quot;6e385d75-3cb0-48de-a819-bc3f0ee99c34&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:312,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0a1271d7-5907-4e6f-a6e9-eac1b8c78927&quot;,&quot;title&quot;:&quot;Roles API Endpoints&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\test\\roles.test.js&quot;,&quot;file&quot;:&quot;\\test\\roles.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Roles API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Roles API Endpoints \&quot;before all\&quot; hook in \&quot;Roles API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Reiniciar tabla de roles\nawait db.query(&#x27;TRUNCATE TABLE Roles RESTART IDENTITY CASCADE&#x27;);\n// Insertar datos iniciales desde la base de datos proporcionada\nawait db.query(`\n  INSERT INTO Roles (tipo) \n  VALUES \n  (&#x27;Administrador&#x27;), \n  (&#x27;Vendedor&#x27;), \n  (&#x27;Cliente&#x27;), \n  (&#x27;Gerente&#x27;), \n  (&#x27;Soporte Técnico&#x27;);\n`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55aab11b-c559-4b94-ae86-bb31d29e2040&quot;,&quot;parentUUID&quot;:&quot;0a1271d7-5907-4e6f-a6e9-eac1b8c78927&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Roles API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Roles API Endpoints \&quot;after all\&quot; hook in \&quot;Roles API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Limpieza después de las pruebas\nawait db.query(&#x27;TRUNCATE TABLE Roles RESTART IDENTITY CASCADE&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e769970-eac3-4f7d-80a3-eadb76ddbeea&quot;,&quot;parentUUID&quot;:&quot;0a1271d7-5907-4e6f-a6e9-eac1b8c78927&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;GET /api/roles debe retornar todos los roles&quot;,&quot;fullTitle&quot;:&quot;Roles API Endpoints GET /api/roles debe retornar todos los roles&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/roles&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(Array.isArray(res.body), true);\nassert.strictEqual(res.body.length, 5); // Verifica que hay 5 roles en la base de datos&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0a452f0-1ab2-4a91-a8ba-30332c33c8ea&quot;,&quot;parentUUID&quot;:&quot;0a1271d7-5907-4e6f-a6e9-eac1b8c78927&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/roles/:id debe retornar un rol por ID&quot;,&quot;fullTitle&quot;:&quot;Roles API Endpoints GET /api/roles/:id debe retornar un rol por ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/roles/1&#x27;); // Rol con id 1 debería ser &#x27;Administrador&#x27;\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.tipo, &#x27;Administrador&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;038e5e3c-b6c2-4a6e-8de1-b7aaee1c3e9e&quot;,&quot;parentUUID&quot;:&quot;0a1271d7-5907-4e6f-a6e9-eac1b8c78927&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/roles debe crear un nuevo rol&quot;,&quot;fullTitle&quot;:&quot;Roles API Endpoints POST /api/roles debe crear un nuevo rol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newRol = { tipo: &#x27;Moderador&#x27; };\nconst res = await request(app).post(&#x27;/api/roles&#x27;).send(newRol);\nassert.strictEqual(res.status, 201);\nassert.strictEqual(res.body.tipo, &#x27;Moderador&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15f14945-d973-4cca-bb25-85ac4342a00b&quot;,&quot;parentUUID&quot;:&quot;0a1271d7-5907-4e6f-a6e9-eac1b8c78927&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/roles debe fallar si falta el campo tipo&quot;,&quot;fullTitle&quot;:&quot;Roles API Endpoints POST /api/roles debe fallar si falta el campo tipo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidRol = {}; // Aquí falta el campo \&quot;tipo\&quot;\nconst res = await request(app).post(&#x27;/api/roles&#x27;).send(invalidRol);\nassert.strictEqual(res.status, 400); // Espera un error 400\nassert.strictEqual(res.body.message, &#x27;El campo \&quot;tipo\&quot; es obligatorio.&#x27;); // Verifica el mensaje de error&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f42d204b-1ff8-4bc3-8778-b1a6635ed844&quot;,&quot;parentUUID&quot;:&quot;0a1271d7-5907-4e6f-a6e9-eac1b8c78927&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;PUT /api/roles/:id debe actualizar un rol&quot;,&quot;fullTitle&quot;:&quot;Roles API Endpoints PUT /api/roles/:id debe actualizar un rol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedRol = { tipo: &#x27;SuperAdmin&#x27; };\nconst res = await request(app).put(&#x27;/api/roles/1&#x27;).send(updatedRol); // Actualizar rol &#x27;Administrador&#x27;\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.tipo, &#x27;SuperAdmin&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4370c6ad-f0b2-4f63-94ff-1e83f56a23c6&quot;,&quot;parentUUID&quot;:&quot;0a1271d7-5907-4e6f-a6e9-eac1b8c78927&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;DELETE /api/roles/:id debe eliminar un rol&quot;,&quot;fullTitle&quot;:&quot;Roles API Endpoints DELETE /api/roles/:id debe eliminar un rol&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:97,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).delete(&#x27;/api/roles/1&#x27;); // Eliminar rol &#x27;Administrador&#x27;\nassert.strictEqual(res.status, 204); // No Content\n// Verificar que el rol fue eliminado\nconst getRes = await request(app).get(&#x27;/api/roles/1&#x27;);\nassert.strictEqual(getRes.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9d71222-e1bd-4efb-9bf2-0f2266f851a2&quot;,&quot;parentUUID&quot;:&quot;0a1271d7-5907-4e6f-a6e9-eac1b8c78927&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/roles/:id debe retornar 404 para un rol inexistente&quot;,&quot;fullTitle&quot;:&quot;Roles API Endpoints GET /api/roles/:id debe retornar 404 para un rol inexistente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/roles/9999&#x27;); // ID que no existe\nassert.strictEqual(res.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95f96cda-e863-4b97-82ae-e0649446dcce&quot;,&quot;parentUUID&quot;:&quot;0a1271d7-5907-4e6f-a6e9-eac1b8c78927&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0a452f0-1ab2-4a91-a8ba-30332c33c8ea&quot;,&quot;038e5e3c-b6c2-4a6e-8de1-b7aaee1c3e9e&quot;,&quot;15f14945-d973-4cca-bb25-85ac4342a00b&quot;,&quot;f42d204b-1ff8-4bc3-8778-b1a6635ed844&quot;,&quot;4370c6ad-f0b2-4f63-94ff-1e83f56a23c6&quot;,&quot;f9d71222-e1bd-4efb-9bf2-0f2266f851a2&quot;,&quot;95f96cda-e863-4b97-82ae-e0649446dcce&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:329,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;62903a27-ebed-4558-95be-fbc70443c6e4&quot;,&quot;title&quot;:&quot;Tipos de Pago API Endpoints&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\test\\tipoPago.test.js&quot;,&quot;file&quot;:&quot;\\test\\tipoPago.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Tipos de Pago API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Tipos de Pago API Endpoints \&quot;before all\&quot; hook in \&quot;Tipos de Pago API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Reiniciar tabla TipoPago y configurar datos iniciales\nawait db.query(&#x27;TRUNCATE TABLE TipoPago RESTART IDENTITY CASCADE&#x27;);\n// Insertar datos iniciales de tipos de pago\nawait db.query(`\n  INSERT INTO TipoPago (descripcion, fecha_creacion, activo)\n  VALUES \n    (&#x27;Efectivo&#x27;, NOW(), TRUE),\n    (&#x27;Tarjeta de crédito&#x27;, NOW(), TRUE);\n`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;980b6830-348e-485b-9acc-ebb25ef349d2&quot;,&quot;parentUUID&quot;:&quot;62903a27-ebed-4558-95be-fbc70443c6e4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Tipos de Pago API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Tipos de Pago API Endpoints \&quot;after all\&quot; hook in \&quot;Tipos de Pago API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Limpiar la tabla TipoPago después de las pruebas\nawait db.query(&#x27;TRUNCATE TABLE TipoPago RESTART IDENTITY CASCADE&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95c597c1-844e-4988-aca9-6a7e640ccf4d&quot;,&quot;parentUUID&quot;:&quot;62903a27-ebed-4558-95be-fbc70443c6e4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;GET /api/tipos-pago debe retornar todos los tipos de pago&quot;,&quot;fullTitle&quot;:&quot;Tipos de Pago API Endpoints GET /api/tipos-pago debe retornar todos los tipos de pago&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/tipos-pago&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(Array.isArray(res.body), true);\nassert.strictEqual(res.body.length, 2); \nassert.strictEqual(res.body[0].descripcion, &#x27;Efectivo&#x27;);\nassert.strictEqual(res.body[1].descripcion, &#x27;Tarjeta de crédito&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e94a2264-3842-4b2a-9b10-be095a031e81&quot;,&quot;parentUUID&quot;:&quot;62903a27-ebed-4558-95be-fbc70443c6e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/tipos-pago/:id debe retornar un tipo de pago por ID&quot;,&quot;fullTitle&quot;:&quot;Tipos de Pago API Endpoints GET /api/tipos-pago/:id debe retornar un tipo de pago por ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/tipos-pago/1&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.descripcion, &#x27;Efectivo&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcdfc93e-b236-48bd-81b8-cc5941fa1180&quot;,&quot;parentUUID&quot;:&quot;62903a27-ebed-4558-95be-fbc70443c6e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/tipos-pago debe crear un nuevo tipo de pago&quot;,&quot;fullTitle&quot;:&quot;Tipos de Pago API Endpoints POST /api/tipos-pago debe crear un nuevo tipo de pago&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newTipo = {\n  descripcion: &#x27;Transferencia bancaria&#x27;,\n  activo: true,\n};\nconst res = await request(app).post(&#x27;/api/tipos-pago&#x27;).send(newTipo);\nassert.strictEqual(res.status, 201);\nassert.strictEqual(res.body.descripcion, &#x27;Transferencia bancaria&#x27;);\nassert.strictEqual(res.body.activo, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5bf62c1-d8f4-4751-9313-a38535de3f6f&quot;,&quot;parentUUID&quot;:&quot;62903a27-ebed-4558-95be-fbc70443c6e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/tipos-pago debe fallar con datos inválidos&quot;,&quot;fullTitle&quot;:&quot;Tipos de Pago API Endpoints POST /api/tipos-pago debe fallar con datos inválidos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidTipo = {\n  descripcion: &#x27;&#x27;, // Descripción vacía\n  activo: &#x27;invalid&#x27;, // Valor no booleano\n};\nconst res = await request(app).post(&#x27;/api/tipos-pago&#x27;).send(invalidTipo);\nassert.strictEqual(res.status, 400);\nassert.ok(Array.isArray(res.body.errores));\nassert.ok(res.body.errores.length &gt; 0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bd51f5e-8036-414b-be28-7b82f8e8d9fe&quot;,&quot;parentUUID&quot;:&quot;62903a27-ebed-4558-95be-fbc70443c6e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;PUT /api/tipos-pago/:id debe actualizar un tipo de pago existente&quot;,&quot;fullTitle&quot;:&quot;Tipos de Pago API Endpoints PUT /api/tipos-pago/:id debe actualizar un tipo de pago existente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedTipo = {\n  descripcion: &#x27;Efectivo Modificado&#x27;,\n  activo: false,\n};\nconst res = await request(app).put(&#x27;/api/tipos-pago/1&#x27;).send(updatedTipo);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.descripcion, &#x27;Efectivo Modificado&#x27;);\nassert.strictEqual(res.body.activo, false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c6aaf61-f242-49d0-bf4b-37b183861a67&quot;,&quot;parentUUID&quot;:&quot;62903a27-ebed-4558-95be-fbc70443c6e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;DELETE /api/tipos-pago/:id debe eliminar un tipo de pago existente&quot;,&quot;fullTitle&quot;:&quot;Tipos de Pago API Endpoints DELETE /api/tipos-pago/:id debe eliminar un tipo de pago existente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).delete(&#x27;/api/tipos-pago/1&#x27;);\nassert.strictEqual(res.status, 204);\n// Verificar que el tipo de pago fue eliminado\nconst getRes = await request(app).get(&#x27;/api/tipos-pago/1&#x27;);\nassert.strictEqual(getRes.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;340a566d-8163-49a4-9ffe-7b89c77a1e0a&quot;,&quot;parentUUID&quot;:&quot;62903a27-ebed-4558-95be-fbc70443c6e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/tipos-pago/:id debe retornar 404 para un tipo de pago inexistente&quot;,&quot;fullTitle&quot;:&quot;Tipos de Pago API Endpoints GET /api/tipos-pago/:id debe retornar 404 para un tipo de pago inexistente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/tipos-pago/9999&#x27;); // ID inexistente\nassert.strictEqual(res.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b07520c7-0d0e-48ef-8f0a-e017a7ae60e7&quot;,&quot;parentUUID&quot;:&quot;62903a27-ebed-4558-95be-fbc70443c6e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e94a2264-3842-4b2a-9b10-be095a031e81&quot;,&quot;dcdfc93e-b236-48bd-81b8-cc5941fa1180&quot;,&quot;e5bf62c1-d8f4-4751-9313-a38535de3f6f&quot;,&quot;2bd51f5e-8036-414b-be28-7b82f8e8d9fe&quot;,&quot;8c6aaf61-f242-49d0-bf4b-37b183861a67&quot;,&quot;340a566d-8163-49a4-9ffe-7b89c77a1e0a&quot;,&quot;b07520c7-0d0e-48ef-8f0a-e017a7ae60e7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:353,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;43bd996c-7f45-4e18-b152-fbb5bb041bd1&quot;,&quot;title&quot;:&quot;Usuarios API Endpoints&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\test\\usuarios.test.js&quot;,&quot;file&quot;:&quot;\\test\\usuarios.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Usuarios API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Usuarios API Endpoints \&quot;before all\&quot; hook in \&quot;Usuarios API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Limpiar las tablas y agregar datos iniciales\nawait db.query(&#x27;TRUNCATE TABLE Usuarios RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Roles RESTART IDENTITY CASCADE&#x27;);\n// Insertar roles\nawait db.query(`\n  INSERT INTO Roles (tipo)\n  VALUES (&#x27;Administrador&#x27;), (&#x27;Vendedor&#x27;), (&#x27;Cliente&#x27;);\n`);\n// Insertar usuarios\nawait db.query(`\n  INSERT INTO Usuarios (nombre, correo, password, idRol)\n  VALUES \n  (&#x27;Juan Pérez&#x27;, &#x27;juan@gmail.com&#x27;, &#x27;123456&#x27;, 1),\n  (&#x27;Ana García&#x27;, &#x27;ana@gmail.com&#x27;, &#x27;abcdef&#x27;, 2);\n`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcee5d9e-8796-45ed-9700-2fbd5f759f42&quot;,&quot;parentUUID&quot;:&quot;43bd996c-7f45-4e18-b152-fbb5bb041bd1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Usuarios API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Usuarios API Endpoints \&quot;after all\&quot; hook in \&quot;Usuarios API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Limpiar las tablas después de las pruebas\nawait db.query(&#x27;TRUNCATE TABLE Usuarios RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Roles RESTART IDENTITY CASCADE&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27ae0227-619f-4b12-8e41-a987d2c8c7d7&quot;,&quot;parentUUID&quot;:&quot;43bd996c-7f45-4e18-b152-fbb5bb041bd1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;GET /api/usuarios debe retornar todos los usuarios&quot;,&quot;fullTitle&quot;:&quot;Usuarios API Endpoints GET /api/usuarios debe retornar todos los usuarios&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/usuarios&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(Array.isArray(res.body), true);\nassert.strictEqual(res.body.length, 2);\nassert.strictEqual(res.body[0].nombre, &#x27;Juan Pérez&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94da8f0e-ddfc-4e8e-99cb-2cd579af85df&quot;,&quot;parentUUID&quot;:&quot;43bd996c-7f45-4e18-b152-fbb5bb041bd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/usuarios/:id debe retornar un usuario por ID&quot;,&quot;fullTitle&quot;:&quot;Usuarios API Endpoints GET /api/usuarios/:id debe retornar un usuario por ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/usuarios/1&#x27;);\nassert.strictEqual(res.status, 200);\nassert.ok(res.body.hasOwnProperty(&#x27;nombre&#x27;));\nassert.strictEqual(res.body.nombre, &#x27;Juan Pérez&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0f83019-741d-47ef-9448-7337f8939391&quot;,&quot;parentUUID&quot;:&quot;43bd996c-7f45-4e18-b152-fbb5bb041bd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/usuarios debe crear un nuevo usuario&quot;,&quot;fullTitle&quot;:&quot;Usuarios API Endpoints POST /api/usuarios debe crear un nuevo usuario&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:95,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newUsuario = {\n  nombre: &#x27;Oscar López&#x27;,\n  correo: &#x27;oscar@gmail.com&#x27;,\n  password: &#x27;12345678&#x27;,\n  idRol: 3,\n};\nconst res = await request(app).post(&#x27;/api/usuarios&#x27;).send(newUsuario);\nassert.strictEqual(res.status, 201);\nassert.ok(res.body.hasOwnProperty(&#x27;nombre&#x27;));\nassert.strictEqual(res.body.nombre, &#x27;Oscar López&#x27;);\n// Verificar que se agregó correctamente\nconst allUsuarios = await request(app).get(&#x27;/api/usuarios&#x27;);\nassert.strictEqual(allUsuarios.body.length, 3);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5767b4b6-f1e8-4952-a686-d180567cd447&quot;,&quot;parentUUID&quot;:&quot;43bd996c-7f45-4e18-b152-fbb5bb041bd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/usuarios debe fallar con datos inválidos&quot;,&quot;fullTitle&quot;:&quot;Usuarios API Endpoints POST /api/usuarios debe fallar con datos inválidos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidUsuario = {\n  nombre: &#x27;&#x27;, // Nombre vacío\n  correo: &#x27;oscar.com&#x27;, // Correo inválido\n  password: &#x27;123&#x27;, // Contraseña corta\n  idRol: &#x27;admin&#x27;, // idRol inválido\n};\nconst res = await request(app).post(&#x27;/api/usuarios&#x27;).send(invalidUsuario);\nassert.strictEqual(res.status, 400);\nassert.ok(Array.isArray(res.body.errores));\nassert.ok(res.body.errores.length &gt; 0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa24b9e1-b8bd-4c04-8d1b-c28703fbc46c&quot;,&quot;parentUUID&quot;:&quot;43bd996c-7f45-4e18-b152-fbb5bb041bd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;PUT /api/usuarios/:id debe actualizar un usuario existente&quot;,&quot;fullTitle&quot;:&quot;Usuarios API Endpoints PUT /api/usuarios/:id debe actualizar un usuario existente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:77,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedUsuario = {\n  nombre: &#x27;Juan Pérez Actualizado&#x27;,\n  correo: &#x27;juan.actualizado@gmail.com&#x27;,\n  password: &#x27;654321&#x27;,\n  idRol: 2,\n};\nconst res = await request(app).put(&#x27;/api/usuarios/1&#x27;).send(updatedUsuario);\nassert.strictEqual(res.status, 200);\nassert.ok(res.body.hasOwnProperty(&#x27;nombre&#x27;));\nassert.strictEqual(res.body.nombre, &#x27;Juan Pérez Actualizado&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b80900fc-5756-4fe6-88fa-b8c0c7f1506e&quot;,&quot;parentUUID&quot;:&quot;43bd996c-7f45-4e18-b152-fbb5bb041bd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;PUT /api/usuarios/:id debe fallar con datos inválidos&quot;,&quot;fullTitle&quot;:&quot;Usuarios API Endpoints PUT /api/usuarios/:id debe fallar con datos inválidos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidUsuario = {\n  nombre: &#x27;A&#x27;, // Nombre demasiado corto\n  correo: &#x27;invalid.com&#x27;, // Correo inválido\n  password: &#x27;123&#x27;, // Contraseña corta\n  idRol: &#x27;rol&#x27;, // idRol inválido\n};\nconst res = await request(app).put(&#x27;/api/usuarios/1&#x27;).send(invalidUsuario);\nassert.strictEqual(res.status, 400);\nassert.ok(Array.isArray(res.body.errores));\nassert.ok(res.body.errores.length &gt; 0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05dbd517-b20d-4a68-b269-2c73708ceeee&quot;,&quot;parentUUID&quot;:&quot;43bd996c-7f45-4e18-b152-fbb5bb041bd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;DELETE /api/usuarios/:id debe eliminar un usuario existente&quot;,&quot;fullTitle&quot;:&quot;Usuarios API Endpoints DELETE /api/usuarios/:id debe eliminar un usuario existente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:113,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).delete(&#x27;/api/usuarios/1&#x27;);\nassert.strictEqual(res.status, 204);\n// Verificar que el usuario fue eliminado\nconst getRes = await request(app).get(&#x27;/api/usuarios/1&#x27;);\nassert.strictEqual(getRes.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb11e1a5-78de-4ae0-aa83-60f25121559c&quot;,&quot;parentUUID&quot;:&quot;43bd996c-7f45-4e18-b152-fbb5bb041bd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/usuarios/:id debe retornar 404 para un usuario inexistente&quot;,&quot;fullTitle&quot;:&quot;Usuarios API Endpoints GET /api/usuarios/:id debe retornar 404 para un usuario inexistente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/usuarios/999&#x27;);\nassert.strictEqual(res.status, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54e3ee9e-e37d-4aa9-8f78-c52c0c49838e&quot;,&quot;parentUUID&quot;:&quot;43bd996c-7f45-4e18-b152-fbb5bb041bd1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;94da8f0e-ddfc-4e8e-99cb-2cd579af85df&quot;,&quot;b0f83019-741d-47ef-9448-7337f8939391&quot;,&quot;5767b4b6-f1e8-4952-a686-d180567cd447&quot;,&quot;aa24b9e1-b8bd-4c04-8d1b-c28703fbc46c&quot;,&quot;b80900fc-5756-4fe6-88fa-b8c0c7f1506e&quot;,&quot;05dbd517-b20d-4a68-b269-2c73708ceeee&quot;,&quot;fb11e1a5-78de-4ae0-aa83-60f25121559c&quot;,&quot;54e3ee9e-e37d-4aa9-8f78-c52c0c49838e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:408,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;91b7908e-5f03-42bf-a110-8a044b2388db&quot;,&quot;title&quot;:&quot;Ventas API Endpoints&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\test\\ventas.test.js&quot;,&quot;file&quot;:&quot;\\test\\ventas.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Ventas API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Ventas API Endpoints \&quot;before all\&quot; hook in \&quot;Ventas API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Limpieza y reinicio de las tablas\nawait db.query(&#x27;TRUNCATE TABLE Ventas RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Empleados RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Usuarios RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Roles RESTART IDENTITY CASCADE&#x27;);\n// Insertar roles\nawait db.query(`\n  INSERT INTO Roles (tipo)\n  VALUES (&#x27;Administrador&#x27;), (&#x27;Vendedor&#x27;);\n`);\n// Insertar usuarios\nawait db.query(`\n  INSERT INTO Usuarios (nombre, correo, password, idRol)\n  VALUES\n  (&#x27;Eliezer Cerecedo&#x27;, &#x27;eliezercerecedo82@gmail.com&#x27;, &#x27;Bocchi17&#x27;, 1),\n  (&#x27;Juan Pablo&#x27;, &#x27;juanpablo@gmail.com&#x27;, &#x27;pablitin18&#x27;, 2);\n`);\n// Insertar empleados\nawait db.query(`\n  INSERT INTO Empleados (nombre, apPaterno, apMaterno, fechaNacimiento, curp, idUsuario)\n  VALUES\n  (&#x27;Eliezer Isai&#x27;, &#x27;Cerecedo&#x27;, &#x27;Florencia&#x27;, &#x27;2002-11-12&#x27;, &#x27;ABC123456XYZ789012&#x27;, 1),\n  (&#x27;Juan&#x27;, &#x27;Perez&#x27;, &#x27;Lopez&#x27;, &#x27;1985-07-20&#x27;, &#x27;DEF123456XYZ789012&#x27;, 2);\n`);\n// Insertar ventas (asegúrate de que idEmpleado corresponda a un id válido)\nawait db.query(`\n  INSERT INTO Ventas (fechaVenta, monto, idEmpleado)\n  VALUES (NOW(), 1000.50, 1), (NOW(), 500.75, 2);\n`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97e0970d-707c-4396-9cce-52a990f7e355&quot;,&quot;parentUUID&quot;:&quot;91b7908e-5f03-42bf-a110-8a044b2388db&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Ventas API Endpoints\&quot;&quot;,&quot;fullTitle&quot;:&quot;Ventas API Endpoints \&quot;after all\&quot; hook in \&quot;Ventas API Endpoints\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Limpieza después de las pruebas\nawait db.query(&#x27;TRUNCATE TABLE Ventas RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Empleados RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Usuarios RESTART IDENTITY CASCADE&#x27;);\nawait db.query(&#x27;TRUNCATE TABLE Roles RESTART IDENTITY CASCADE&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e1aa5e4-65d3-4e17-be6b-5c4a56be30ba&quot;,&quot;parentUUID&quot;:&quot;91b7908e-5f03-42bf-a110-8a044b2388db&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;GET /api/ventas debe retornar todas las ventas&quot;,&quot;fullTitle&quot;:&quot;Ventas API Endpoints GET /api/ventas debe retornar todas las ventas&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/ventas&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(Array.isArray(res.body), true);\nassert.strictEqual(res.body.length, 2); // Verifica que hay dos ventas&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccb74120-fd28-4678-9d00-ffa08b5ae5f9&quot;,&quot;parentUUID&quot;:&quot;91b7908e-5f03-42bf-a110-8a044b2388db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/ventas/:folio debe retornar una venta por folio&quot;,&quot;fullTitle&quot;:&quot;Ventas API Endpoints GET /api/ventas/:folio debe retornar una venta por folio&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/ventas/1&#x27;);\nassert.strictEqual(res.status, 200);\nassert.strictEqual(res.body.folio, 1);\nassert.strictEqual(res.body.monto, 1000.50);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73504f84-8a65-4724-8d9e-a8effb003a22&quot;,&quot;parentUUID&quot;:&quot;91b7908e-5f03-42bf-a110-8a044b2388db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/ventas debe crear una nueva venta&quot;,&quot;fullTitle&quot;:&quot;Ventas API Endpoints POST /api/ventas debe crear una nueva venta&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const newVenta = { monto: 700.25, idempleado: 2 }; // asegurarse de que los datos sean correctos\nconst res = await request(app).post(&#x27;/api/ventas&#x27;).send(newVenta);\nassert.strictEqual(res.status, 201); // Espera 201: Created\nassert.strictEqual(res.body.monto, 700.25); // Verifica el monto\nassert.strictEqual(res.body.idempleado, 2); // Verifica el id del empleado&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31513f29-f7c0-47f8-96c3-61e67c4bc920&quot;,&quot;parentUUID&quot;:&quot;91b7908e-5f03-42bf-a110-8a044b2388db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;POST /api/ventas debe fallar si falta el campo monto&quot;,&quot;fullTitle&quot;:&quot;Ventas API Endpoints POST /api/ventas debe fallar si falta el campo monto&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const invalidVenta = { idEmpleado: 2 }; // Monto faltante\nconst res = await request(app).post(&#x27;/api/ventas&#x27;).send(invalidVenta);\nassert.strictEqual(res.status, 400); // Bad Request&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61131ea0-bbcf-41f3-a16e-4c396be440c5&quot;,&quot;parentUUID&quot;:&quot;91b7908e-5f03-42bf-a110-8a044b2388db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;PUT /api/ventas/:folio debe actualizar una venta&quot;,&quot;fullTitle&quot;:&quot;Ventas API Endpoints PUT /api/ventas/:folio debe actualizar una venta&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const updatedVenta = { monto: 1200.75, idempleado: 1 }; // asegurarse de que los datos sean correctos\nconst res = await request(app).put(&#x27;/api/ventas/1&#x27;).send(updatedVenta);\nassert.strictEqual(res.status, 200); // Espera 200: OK\nassert.strictEqual(res.body.monto, 1200.75); // Verifica el monto actualizado\nassert.strictEqual(res.body.idempleado, 1); // Verifica el id del empleado&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66b4a240-784c-4053-b1a2-6165ee6925c4&quot;,&quot;parentUUID&quot;:&quot;91b7908e-5f03-42bf-a110-8a044b2388db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;DELETE /api/ventas/:folio debe eliminar una venta&quot;,&quot;fullTitle&quot;:&quot;Ventas API Endpoints DELETE /api/ventas/:folio debe eliminar una venta&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).delete(&#x27;/api/ventas/1&#x27;);\nassert.strictEqual(res.status, 204); // No Content\n// Verificar que la venta fue eliminada\nconst getRes = await request(app).get(&#x27;/api/ventas/1&#x27;);\nassert.strictEqual(getRes.status, 404); // Venta no encontrada&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2227254-d943-4b0e-8d8e-8ce8115c0811&quot;,&quot;parentUUID&quot;:&quot;91b7908e-5f03-42bf-a110-8a044b2388db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;GET /api/ventas/:folio debe retornar 404 para una venta inexistente&quot;,&quot;fullTitle&quot;:&quot;Ventas API Endpoints GET /api/ventas/:folio debe retornar 404 para una venta inexistente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app).get(&#x27;/api/ventas/9999&#x27;); // Folio inexistente\nassert.strictEqual(res.status, 404); // No se encuentra la venta&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e11e7707-a7f7-4228-8f10-56a26985546d&quot;,&quot;parentUUID&quot;:&quot;91b7908e-5f03-42bf-a110-8a044b2388db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ccb74120-fd28-4678-9d00-ffa08b5ae5f9&quot;,&quot;73504f84-8a65-4724-8d9e-a8effb003a22&quot;,&quot;31513f29-f7c0-47f8-96c3-61e67c4bc920&quot;,&quot;61131ea0-bbcf-41f3-a16e-4c396be440c5&quot;,&quot;66b4a240-784c-4053-b1a2-6165ee6925c4&quot;,&quot;f2227254-d943-4b0e-8d8e-8ce8115c0811&quot;,&quot;e11e7707-a7f7-4228-8f10-56a26985546d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:361,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.8.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;hola&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\penar\\OneDrive\\Documentos\\hola\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>